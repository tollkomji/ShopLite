# Ключові сценарії

Нижче описано основні сценарії, які реалізуються в проєкті. На ЛР3 вони працюють зі статичними даними (in-memory), на ЛР4 — з БД.

## Сценарій 1: Створення товару

**Передумова:** сервіс Catalog доступний.  
**Кроки:**

1. Клієнт викликає `POST /products` з `title`, `price`.
2. Catalog Service валідує дані та створює товар.
3. Повертає створений `product` з `id`.

**Зміни даних:** створюється запис `PRODUCT`.

## Сценарій 2: Перегляд каталогу

1. Клієнт викликає `GET /products`.
2. Catalog Service повертає список товарів.

**Зміни даних:** немає (читання).

## Сценарій 3: Створення замовлення

**Передумова:** існують товари в Catalog.  
**Кроки:**

1. Клієнт викликає `POST /orders` з `items: [{ productId, qty }]`.
2. Order Service звертається в Catalog Service для кожного `productId`.
3. Якщо будь-якого товару немає — повертає помилку (наприклад 400/404).
4. Обчислює `total = Σ(price * qty)`.
5. Створює `ORDER` та `ORDER_ITEM` (priceSnapshot).
6. Повертає створене замовлення.

**Агрегації:** поле `total` — агреговане значення на основі позицій.

## Сценарій 4: Перегляд замовлення

1. Клієнт викликає `GET /orders/:id`.
2. Order Service повертає `order` разом з `items`.

**Зміни даних:** немає (читання).

## Валідація та помилки (мінімум)

- Якщо `qty <= 0` → 400 Bad Request
- Якщо `productId` не існує → 404 Not Found (або 400 з описом)
- Якщо тіло запиту порожнє/некоректне → 400 Bad Request
